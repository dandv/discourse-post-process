// Read a map of MyBB to Discourse topic IDs, make HTTP requests to resolve them to URLs, then output an nginx map file

'use strict';

// Get this map by patching the MyBB importer as described at https://meta.discourse.org/t/redirecting-old-forum-urls-to-new-discourse-urls/20930/21
let topicsMap = {
    1: 51,
    2: 52,
    4: 53,
    6: 54,
    7: 55,
    8: 56,
    11: 59,
    12: 60,
    13: 61,
    14: 62,
    15: 63,
    16: 64,
    17: 65,
    18: 66,
    20: 67,
    21: 68,
    23: 70,
    24: 71,
    25: 72,
    26: 73,
    32: 74,
    33: 75,
    35: 76,
    37: 77,
    39: 78,
    40: 79,
    45: 80,
    46: 81,
    48: 82,
    66: 83,
    50: 84,
    51: 85,
    52: 86,
    54: 87,
    55: 88,
    56: 89,
    57: 90,
    58: 91,
    59: 92,
    60: 93,
    68: 94,
    69: 95,
    70: 96,
    72: 97,
    73: 98,
    84: 99,
    92: 103,
    93: 104,
    94: 105,
    95: 106,
    96: 107,
    97: 108,
    98: 109,
    99: 110,
    100: 111,
    101: 112,
    102: 113,
    103: 114,
    104: 115,
    105: 116,
    106: 117,
    107: 118,
    108: 119,
    109: 120,
    110: 121,
    112: 122,
    114: 124,
    115: 125,
    116: 126,
    117: 127,
    118: 128,
    119: 129,
    122: 130,
    123: 131,
    124: 132,
    126: 133,
    127: 134,
    129: 135,
    130: 136,
    131: 137,
    132: 138,
    128: 139,
    133: 140,
    134: 141,
    135: 142,
    136: 143,
    137: 144,
    138: 145,
    139: 146,
    140: 147,
    141: 148,
    142: 149,
    143: 150,
    144: 151,
    145: 152,
    146: 153,
    147: 154,
    148: 155,
    120: 156,
    149: 157,
    150: 158,
    151: 159,
    152: 160,
    153: 161,
    154: 162,
    155: 163,
    156: 164,
    157: 165,
    158: 166,
    159: 167,
    160: 168,
    161: 169,
    162: 170,
    164: 171,
    165: 172,
    166: 173,
    167: 174,
    169: 175,
    170: 176,
    171: 177,
    172: 178,
    174: 179,
    176: 180,
    177: 181,
    179: 182,
    181: 183,
    182: 184,
    190: 185,
    191: 186,
    192: 187,
    193: 188,
    197: 189,
    198: 190,
    199: 191,
    200: 192,
    201: 193,
    202: 194,
    203: 195,
    204: 196,
    206: 197,
    207: 198,
    208: 199,
    209: 200,
    211: 201,
    212: 202,
    213: 203,
    215: 204,
    218: 205,
    219: 206,
    222: 207,
    223: 208,
    224: 209,
    225: 210,
    226: 211,
    227: 212,
    228: 213,
    229: 214,
    230: 215,
    231: 216,
    232: 217,
    233: 218,
    234: 219,
    235: 220,
    236: 221,
    239: 222,
    237: 223,
    240: 224,
    241: 225,
    242: 226,
    243: 227,
    244: 228,
    247: 229,
    248: 230,
    249: 231,
    250: 232,
    251: 233,
    253: 234,
    255: 235,
    256: 236,
    257: 237,
    258: 238,
    259: 239,
    260: 240,
    261: 241,
    262: 242,
    263: 243,
    264: 244,
    265: 245,
    267: 246,
    268: 247,
    269: 248,
    270: 249,
    271: 250,
    272: 251,
    273: 252,
    274: 253,
    275: 254,
    276: 255,
    277: 256,
    278: 257,
    279: 258,
    280: 259,
    281: 260,
    282: 261,
    283: 262,
    284: 263,
    286: 264,
    287: 265,
    288: 266,
    289: 267,
    290: 268,
    291: 269,
    292: 270,
    293: 271,
    294: 272,
    285: 273,
    295: 274,
    299: 275,
    300: 276,
    301: 277,
    302: 278,
    303: 279,
    304: 280,
    305: 281,
    312: 282,
    313: 283,
    314: 284,
    315: 285,
    316: 286,
    317: 287,
    318: 288,
    319: 289,
    320: 290,
    321: 291,
    322: 292,
    323: 293,
    324: 294,
    325: 295,
    326: 296,
    327: 297,
    328: 298,
    329: 299,
    330: 300,
    331: 301,
    333: 302,
    334: 303,
    335: 304,
    336: 305,
    337: 306,
    338: 307,
    339: 308,
    340: 309,
    342: 310,
    343: 311,
    344: 312,
    345: 313,
    346: 314,
    347: 315,
    349: 316,
    350: 317,
    351: 318,
    352: 319,
    353: 320,
    354: 321,
    355: 322,
    357: 323,
    358: 324,
    359: 325,
    360: 326,
    361: 327,
    362: 328,
    363: 329,
    364: 330,
    365: 331,
    366: 332,
    367: 333,
    369: 335,
    370: 336,
    371: 337,
    373: 338,
    374: 339,
    375: 340,
    376: 341,
    377: 342,
    378: 343,
    379: 344,
    380: 345,
    381: 346,
    383: 347,
    384: 348,
    385: 349,
    386: 350,
    387: 351,
    388: 352,
    389: 353,
    390: 354,
    391: 355,
    392: 356,
    393: 357,
    395: 358,
    396: 359,
    397: 360,
    399: 361,
    400: 362,
    401: 363,
    402: 364,
    404: 366,
    405: 367,
    406: 368,
    407: 369,
    408: 370,
    409: 371,
    410: 372,
    411: 373,
    412: 374,
    414: 375,
    415: 376,
    416: 377,
    417: 378,
    418: 379,
    420: 380,
    425: 382,
    426: 383,
    427: 384,
    428: 385,
    429: 386,
    430: 387,
    432: 388,
    433: 389,
    434: 390,
    436: 391,
    437: 392,
    438: 393,
    439: 394,
    440: 395,
    441: 396,
    442: 397,
    443: 398,
    445: 399,
    446: 400,
    447: 401,
    448: 402,
    449: 403,
    452: 404,
    453: 405,
    454: 406,
    455: 407,
    456: 408,
    457: 409,
    458: 410,
    459: 411,
    462: 413,
    463: 414,
    464: 415,
    466: 416,
    467: 417,
    468: 418,
    469: 419,
    473: 423,
    476: 424,
    478: 426,
    482: 429,
    486: 432,
    487: 433,
    488: 434,
    489: 435,
    490: 436,
    491: 437,
    492: 438,
    493: 439,
    494: 440,
    495: 441,
    496: 442,
    498: 443,
    499: 444,
    500: 445,
    501: 446,
    502: 447,
    503: 448,
    504: 449,
    505: 450,
    506: 451,
    508: 452,
    509: 453,
    511: 454,
    512: 455,
    515: 456,
    516: 457,
    514: 458,
    517: 459,
    519: 460,
    520: 461,
    521: 462,
    522: 463,
    523: 464,
    524: 465,
    527: 466,
    525: 467,
    526: 468,
    529: 469,
    530: 470,
    532: 471,
    533: 472,
    534: 473,
    535: 474,
    536: 475,
    537: 476,
    538: 477,
    539: 478,
    540: 479,
    541: 480,
    542: 481,
    547: 482,
    551: 483,
    552: 484,
    553: 485,
    554: 486,
    555: 487,
    556: 488,
    557: 489,
    558: 490,
    562: 491,
    564: 492,
    565: 493,
    566: 494,
    567: 495,
    568: 496,
    569: 497,
    570: 498,
    571: 499,
    572: 500,
    573: 501,
    574: 502,
    581: 503,
    582: 504,
    583: 505,
    584: 506,
    585: 507,
    590: 508,
    591: 509,
    593: 511,
    595: 512,
    596: 513,
    597: 514,
    598: 515,
    599: 516,
    600: 517,
    601: 518,
    602: 519,
    603: 520,
    605: 521,
    606: 522,
    607: 523,
    608: 524,
    609: 525,
    610: 526,
    611: 527,
    612: 528,
    614: 529,
    615: 530,
    616: 531,
    617: 532,
    618: 533,
    619: 534,
    620: 535,
    621: 536,
    622: 537,
    623: 538,
    624: 539,
    625: 540,
    626: 541,
    627: 542,
    628: 543,
    629: 544,
    630: 545,
    632: 546,
    633: 547,
    636: 548,
    637: 549,
    639: 550,
    640: 551,
    642: 552,
    644: 553,
    645: 554,
    646: 555,
    648: 556,
    651: 558,
    652: 559,
    653: 560,
    654: 561,
    657: 562,
    659: 563,
    660: 564,
    661: 565,
    662: 566,
    664: 567,
    665: 568,
    667: 569,
    668: 570,
    669: 571,
    670: 572,
    671: 573,
    672: 574,
    673: 575,
    674: 576,
    675: 577,
    676: 578,
    677: 579,
    678: 580,
    679: 581,
    680: 582,
    681: 583,
    682: 584,
    683: 585,
    684: 586,
    685: 587,
    686: 588,
    687: 589,
    688: 590,
    689: 591,
    691: 593,
    692: 594,
    693: 595,
    694: 596,
    695: 597,
    696: 598,
    697: 599,
    698: 600,
    699: 601,
    701: 602,
    702: 603,
    703: 604,
    704: 605,
    705: 606,
    706: 607,
    707: 608,
    708: 609,
    709: 610,
    710: 611,
    711: 612,
    712: 613,
    713: 614,
    714: 615,
    715: 616,
    716: 617,
    717: 618,
    718: 619,
    719: 620,
    720: 621,
    723: 622,
    724: 623,
    725: 624,
    726: 625,
    727: 626,
    728: 627,
    731: 628,
    732: 629,
    733: 630,
    734: 631,
    735: 632,
    737: 633,
    738: 634,
    739: 635,
    740: 636,
    742: 637,
    743: 638,
    744: 639,
    745: 640,
    746: 641,
    747: 642,
    748: 643,
    749: 644,
    750: 645,
    751: 646,
    752: 647,
    753: 648,
    754: 649,
    755: 650,
    756: 651,
    758: 652,
    759: 653,
    760: 654,
    761: 655,
    763: 656,
    765: 657,
    766: 658,
    767: 659,
    769: 660,
    770: 661,
    771: 662,
    772: 663,
    774: 664,
    775: 665,
    777: 666,
    778: 667,
    779: 668,
    780: 669,
    781: 670,
    782: 671,
    783: 672,
    784: 673,
    785: 674,
    786: 675,
    789: 676,
    790: 677,
    791: 678,
    792: 679,
    793: 680,
    795: 681,
    799: 682,
    800: 683,
    801: 684,
    802: 685,
    803: 686,
    804: 687,
    805: 688,
    806: 689,
    807: 690,
    808: 691,
    810: 692,
    811: 693,
    812: 694,
    813: 695,
    815: 696,
    816: 697,
    818: 698,
    820: 699,
    821: 700,
    823: 701,
    824: 702,
    825: 703,
    826: 704,
    798: 705,
    829: 706,
    839: 707,
    840: 708,
    841: 709,
    850: 710,
    851: 711,
    852: 712,
    853: 713,
    854: 714,
    855: 715,
    856: 716,
    858: 717,
    859: 718,
    860: 719,
    861: 720,
    863: 721,
    864: 722,
    865: 723,
    866: 724,
    867: 725,
    868: 726,
    869: 727,
    870: 728,
    875: 729,
    886: 730,
    889: 731,
    930: 732,
    936: 733,
    937: 734,
    939: 735,
    940: 736,
    941: 737,
    943: 739,
    944: 740,
    945: 741,
    947: 742,
    949: 743,
    948: 744,
    953: 748,
    957: 750,
    959: 751,
    960: 752,
    961: 753,
    964: 755,
    965: 756,
    966: 757,
    967: 758,
    968: 759,
    969: 760,
    970: 761,
    971: 762,
    972: 763,
    973: 764,
    978: 765,
    980: 766,
    982: 767,
    983: 768,
    985: 769,
    986: 770,
    987: 771,
    988: 772,
    989: 773,
    990: 774,
    991: 775,
    992: 776,
    993: 777,
    994: 778,
    995: 779,
    996: 780,
    997: 781,
    998: 782,
    999: 783,
    1000: 784,
    1001: 785,
    1002: 786,
    1003: 787,
    1004: 788,
    1005: 789,
    1017: 790,
    1019: 791,
    1020: 792,
    1022: 793,
    1023: 794,
    1026: 795,
    1030: 796,
    1031: 797,
    1032: 798,
    1033: 799,
    1034: 800,
    1035: 801,
    1036: 802,
    1037: 803,
    1038: 804,
    1039: 805,
    1041: 806,
    1043: 807,
    1044: 808,
    1045: 809,
    1046: 810,
    1047: 811,
    1048: 812,
    1049: 813,
    1050: 814,
    1052: 815,
    1058: 816,
    1069: 817,
    1070: 818,
    1074: 819,
    1075: 820,
    1076: 821,
    1077: 822,
    1078: 823,
    1082: 824,
    1083: 825,
    1084: 826,
    1088: 827,
    1089: 828,
    1092: 829,
    1094: 830,
    1097: 831,
    1098: 832,
    1099: 833,
    1100: 834,
    1101: 835,
    1103: 836,
    1104: 837,
    1105: 838,
    1106: 839,
    1107: 840,
    1109: 841,
    1110: 842,
    1111: 843,
    1112: 844,
    1113: 845,
    1116: 846,
    1117: 847,
    1119: 848,
    1120: 849,
    1125: 850,
    1126: 851,
    1127: 852,
    1129: 853,
    1130: 854,
    1131: 855,
    1132: 856,
    1134: 857,
    1137: 858,
    1138: 859,
    1141: 860,
    1148: 861,
    1150: 862,
    1158: 863,
    1159: 864,
    1160: 865,
    1161: 866,
    1162: 867,
    1166: 868,
    1167: 869,
    1168: 870,
    1169: 871,
    1170: 872,
    1171: 873,
    1173: 874,
    1174: 875,
    1175: 876,
    1176: 877,
    1177: 878,
    1178: 879,
    1179: 880,
    1180: 881,
    1183: 882,
    1184: 883,
    1185: 884,
    1188: 885,
    1189: 886,
    1190: 887,
    1191: 888,
    1192: 889,
    1193: 890,
    1195: 891,
    1196: 892,
    1198: 893,
    1199: 894,
    1200: 895,
    1201: 896,
    1202: 897,
    1203: 898,
    1204: 899,
    1205: 900,
    1207: 901,
    1208: 902,
    1209: 903,
    1210: 904,
    1211: 905,
    1212: 906,
    1213: 907,
    1214: 908,
    1215: 909,
    1216: 910,
    1217: 911,
    1219: 912,
    1220: 913,
    1221: 914,
    1222: 915,
    1223: 916,
    1225: 917,
    1230: 918,
    1231: 919,
    1232: 920,
    1233: 921,
    1234: 922,
    1235: 923,
    1237: 924,
    1238: 925,
    1243: 927,
    1244: 928,
    1247: 930,
    1249: 931,
    1250: 932,
    1251: 933,
    1252: 934,
    1253: 935,
    1254: 936,
    1255: 937,
    1256: 938,
    1258: 939,
    1259: 940,
    1261: 941,
    1263: 942,
    1264: 943,
    1265: 944,
    1266: 945,
    1272: 946,
    1271: 947,
    1273: 948,
    1278: 949,
    1279: 950,
    1280: 951,
    1281: 952,
    1282: 953,
    1284: 954,
    1285: 955,
    1286: 956,
    1287: 957,
    1289: 959,
    1290: 960,
    1291: 961,
    1293: 962,
    1294: 963,
    1302: 964,
    1303: 965,
    1308: 966,
    1312: 967,
    1313: 968,
    1314: 969,
    1315: 970,
    1317: 971,
    1318: 972,
    1319: 973,
    1320: 974,
    1326: 975,
    1327: 976,
    1328: 977,
    1329: 978,
    1330: 979,
    1331: 980,
    1332: 981,
    1333: 982,
    1334: 983,
    1335: 984,
    1336: 985,
    1337: 986,
    1338: 987,
    1340: 988,
    1339: 989,
    1341: 990,
    1343: 991,
    1344: 992,
    1345: 993,
    1346: 994,
    1347: 995,
    1348: 996,
    1350: 997,
    1351: 998,
    1353: 999,
    1354: 1000,
    1355: 1001,
    1356: 1002,
    1357: 1003,
    1358: 1004,
    1359: 1005,
    1360: 1006,
    1361: 1007,
    1362: 1008,
    1363: 1009,
    1364: 1010,
    1365: 1011,
    1366: 1012,
    1368: 1013,
    1367: 1014,
    1369: 1015,
    1370: 1016,
    1371: 1017,
    1375: 1018,
    1376: 1019,
    1377: 1020,
    1378: 1021,
    1379: 1022,
    1380: 1023,
    1381: 1024,
    1382: 1025,
    1384: 1026,
    1385: 1027,
    1386: 1028,
    1387: 1029,
    1388: 1030,
    1389: 1031,
    1390: 1032,
    1392: 1033,
    1393: 1034,
    1397: 1035,
    1398: 1036,
    1399: 1037,
    1400: 1038,
    1401: 1039,
    1404: 1040,
    1405: 1041,
    1406: 1042,
    1407: 1043,
    1408: 1044,
    1409: 1045,
    1411: 1046,
    1412: 1047,
    1413: 1048,
    1414: 1049,
    1415: 1050,
    1417: 1051,
    1418: 1052,
    1419: 1053,
    1420: 1054,
    1421: 1055,
    1422: 1056,
    1423: 1057,
    1424: 1058,
    1425: 1059,
    1426: 1060,
    1427: 1061,
    1429: 1062,
    1431: 1063,
    1432: 1064,
    1438: 1065,
    1439: 1066,
    1440: 1067,
    1441: 1068,
    1444: 1069,
    1445: 1070,
    1452: 1071,
    1461: 1074,
    1462: 1075,
    1463: 1076,
    1464: 1077,
    1466: 1078,
    1467: 1079,
    1468: 1080,
    1471: 1081,
    1473: 1082,
    1474: 1083,
    1475: 1084,
    1477: 1085,
    1478: 1086,
    1479: 1087,
    1480: 1088,
    1481: 1089,
    1482: 1090,
    1483: 1091,
    1484: 1092,
    1486: 1093,
    1487: 1094,
    1489: 1095,
    1490: 1096,
    1491: 1097,
    1492: 1098,
    1494: 1099,
    1495: 1100,
    1496: 1101,
    1500: 1102,
    1505: 1103,
    1507: 1104,
    1508: 1105,
    1511: 1106,
    1513: 1107,
    1516: 1108,
    1518: 1109,
    1520: 1110,
    1521: 1111,
    1522: 1112,
    1525: 1113,
    1528: 1114,
    1534: 1115,
    1536: 1116,
    1541: 1117,
    1546: 1118,
    1549: 1119,
    1554: 1120,
    1556: 1121,
    1557: 1122,
    1563: 1123,
    1566: 1124,
    1568: 1125,
    1576: 1126,
    1581: 1127,
    1582: 1128,
    1583: 1129,
    1586: 1130,
    1588: 1131,
    1589: 1132,
    1590: 1133,
    1591: 1134,
    1594: 1136,
    1596: 1137,
    1597: 1138,
    1599: 1139,
    1600: 1140,
    1601: 1141,
    1602: 1142,
    1603: 1143,
    1604: 1144,
    1607: 1145,
    1608: 1146,
    1612: 1147,
    1613: 1148,
    1615: 1149,
    1616: 1150,
    1619: 1151,
    1622: 1152,
    1624: 1153,
    1626: 1154,
    1629: 1156,
    1631: 1157,
    1633: 1158,
    1635: 1159,
    1636: 1160,
    1638: 1161,
    1639: 1162,
    1640: 1163,
    1641: 1164,
    1642: 1165,
    1643: 1166,
    1644: 1167,
    1645: 1168,
    1646: 1169,
    1647: 1170,
    1649: 1171,
    1656: 1172,
    1657: 1173,
    1658: 1174,
    1659: 1175,
    1667: 1176,
    1668: 1177,
    1671: 1178,
    1672: 1179,
    1673: 1180,
    1677: 1181,
    1679: 1182,
    1682: 1183,
    1683: 1184,
    1685: 1185,
    1686: 1186,
    1688: 1187,
    1689: 1188,
    1690: 1189,
    1694: 1190,
    1697: 1191,
    1700: 1192,
    1701: 1193,
    1702: 1194,
    1704: 1195,
    1705: 1196,
    1706: 1197,
    1707: 1198,
    1711: 1200,
    1712: 1201,
    1713: 1202,
    1714: 1203,
    1718: 1204,
    1724: 1205,
    1725: 1206,
    1729: 1207,
    1736: 1208,
    1737: 1209,
    1746: 1210,
    1750: 1211,
    1751: 1212,
    1752: 1213,
    1758: 1214,
    1759: 1215,
    1760: 1216,
    1763: 1217,
    1764: 1218,
    1765: 1219,
    1769: 1220,
    1773: 1221,
    1795: 1222,
    1796: 1223,
    1804: 1224,
    1827: 1225,
    1832: 1226,
    1836: 1227,
    1837: 1228,
    1841: 1229,
    1843: 1230,
    1847: 1231,
    1848: 1232,
    1849: 1233,
    1854: 1234,
    1855: 1235,
    1857: 1236,
    1860: 1237,
    1871: 1238,
    1895: 1239,
    1903: 1240,
    1907: 1241,
    1908: 1242,
    1910: 1243,
    1915: 1244,
    1916: 1245,
    1918: 1246,
    1924: 1247,
    1927: 1248,
    1929: 1249,
    1930: 1250,
    1933: 1251,
    1934: 1252,
    1968: 1254,
    1984: 1255,
    1987: 1256,
    1988: 1257,
    1989: 1258,
    1990: 1259,
    1994: 1260,
    1995: 1261,
    2008: 1262,
    2009: 1263,
    2011: 1264,
    2012: 1265,
    2013: 1266,
    2015: 1267,
    2023: 1268,
    2027: 1269,
    2030: 1270,
    2031: 1271,
    2032: 1272,
    2033: 1273,
    2034: 1274,
    2050: 1275,
    2054: 1276,
    2055: 1277,
    2056: 1278,
    2057: 1279,
    2058: 1280,
    2059: 1281,
    2060: 1282,
    2067: 1283,
    2068: 1284,
    2071: 1285,
    2075: 1286,
    2078: 1287,
    2081: 1288,
    2085: 1289,
    2086: 1290,
    2090: 1291,
    2091: 1292,
    2096: 1293,
    2097: 1294,
    2098: 1295,
    2099: 1296,
    2105: 1297,
    2114: 1298,
    2116: 1299,
    2123: 1300,
    2124: 1301,
    2125: 1302,
    2129: 1303,
    2130: 1304,
    2131: 1305,
    2132: 1306,
    2133: 1307,
    2134: 1308,
    2137: 1310,
    2142: 1311,
    2149: 1312,
    2150: 1313,
    2151: 1314,
    2152: 1315,
    2154: 1316,
    2155: 1317,
    2156: 1318,
    2158: 1319,
    2159: 1320,
    2161: 1322,
    2163: 1324,
    2167: 1328,
    2169: 1330,
    2171: 1332,
    2173: 1334,
    2181: 1342,
    2183: 1344,
    2184: 1417,
    2185: 1418,
    2186: 1419,
    2187: 1420,
    2192: 1421,
    2194: 1422,
    2195: 1423,
    2198: 1424,
    2201: 1425,
    2204: 1426,
    2205: 1427,
    2211: 1428,
    2215: 1430,
    2217: 1431,
    2218: 1432,
    2219: 1433,
    2220: 1434,
    2224: 1435,
    2225: 1436,
    2227: 1437,
    2236: 1438,
    2237: 1439,
    2238: 1440,
    2239: 1441,
    2242: 1442,
    2244: 1443,
    2245: 1444,
    2273: 1445,
    2275: 1446,
    2283: 1447,
    2291: 1448,
    2293: 1449,
    2294: 1450,
    2298: 1451,
    2301: 1452,
    2305: 1453,
    2308: 1454,
    2313: 1455,
    2315: 1456,
    2320: 1457,
    2325: 1458,
    2326: 1459,
    2328: 1460,
    2329: 1461,
    2330: 1462,
    2332: 1463,
    2333: 1464,
    2343: 1466,
    2345: 1467,
    2348: 1468,
    2350: 1469,
    2351: 1470,
    2352: 1471,
    2355: 1472,
    2356: 1473,
    2357: 1474,
    2359: 1475,
    2372: 1476,
    2373: 1477,
    2374: 1478,
    2375: 1479,
    2376: 1480,
    2377: 1481,
    2378: 1482,
    2379: 1483,
    2380: 1484,
    2389: 1486,
    2390: 1487,
    2391: 1488,
    2399: 1489,
    2400: 1490,
    2405: 1491,
    2407: 1492,
    2408: 1493,
    2410: 1494,
    2417: 1495,
    2418: 1496,
    2419: 1497,
    2420: 1498,
    2421: 1499,
    2422: 1500,
    2423: 1501,
    2429: 1502,
    2431: 1503,
    2432: 1504,
    2434: 1505,
    2435: 1506,
    2436: 1507,
    2437: 1508,
    2438: 1509,
    2440: 1510,
    2441: 1511,
    2442: 1512,
    2443: 1513,
    2444: 1514,
    2445: 1515,
    2457: 1516,
    2458: 1517,
    2459: 1518,
    2462: 1519,
    2467: 1520,
    2472: 1522,
    2473: 1523,
    2474: 1524,
    2475: 1525,
    2476: 1526,
    2481: 1527,
    2493: 1528,
    2498: 1529,
    2508: 1530,
    2527: 1531,
    2529: 1532,
    2530: 1533,
    2531: 1534,
    2532: 1535,
    2533: 1536,
    2534: 1537,
    2535: 1538,
    2539: 1539,
    2540: 1540,
    2542: 1541,
    2543: 1542,
    2544: 1543,
    2545: 1544,
    2546: 1545,
    2549: 1546,
    2551: 1547,
    2556: 1548,
    2563: 1549,
    2565: 1551,
    2571: 1640
};

let request = require('sync-request');

for (let mybb of Object.keys(topicsMap)) {
    let discourse = topicsMap[mybb];

    // resolve redirects, e.g. https://forum.quantifiedself.com/showthread.php?tid=1 leading to https://forum.quantifiedself.com/thread-quantified-self-forum-launched
    let res = request('GET', 'https://forum.quantifiedself.com/showthread.php?tid=' + mybb);
    mybb = res.url.replace(/^.*?\/thread-/, '/thread-');  // keep only the path

    res = request('GET', 'http://discourse.quantifiedselfforum.com/t/' + discourse);
    discourse = res.url.replace(/^.*?\/t\//, '/t/');  // keep only the path

    // dump nginx map file entry
    console.log(mybb, ' ', discourse, ';');
}
